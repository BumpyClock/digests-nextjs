/* Scroll-driven animation for scroll indicators */

/* Base indicator styles */
.scroll-indicator {
  position: absolute;
  left: 0;
  right: 0;
  height: 1.5rem;
  z-index: 10;
  pointer-events: none;
  background: linear-gradient(to var(--gradient-direction), hsl(var(--background)/90%) 0%, transparent 100%);
  transform-origin: var(--transform-origin);
  box-shadow: 0 0 10px 4px hsl(var(--background)/40%);
  /* Default state - visible until we know there's no overflow */
  opacity: 1;
  transform: scaleY(1);
}

/* CSS variables for top and bottom indicators */
.scroll-indicator--top {
  --gradient-direction: bottom;
  --transform-origin: top;
  --scroll-buffer: 50px;
  top: 0;
}

.scroll-indicator--bottom {
  --gradient-direction: top;
  --transform-origin: bottom;
  --scroll-buffer: 50px;
  bottom: 0;
}

/* Modern scroll-driven animations */
@supports (animation-timeline: scroll()) {
  .scroll-indicator--top {
    animation: fade-top both linear;
    animation-timeline: scroll(nearest block);
    animation-range: 0 var(--scroll-buffer);
  }
  
  .scroll-indicator--bottom {
    animation: fade-bottom both linear;
    animation-timeline: scroll(nearest block);
    animation-range: calc(100% - var(--scroll-buffer)) 100%;
  }
  
  @keyframes fade-top {
    from {
      opacity: 0;
      transform: scaleY(0);
    }
    to {
      opacity: 1;
      transform: scaleY(1);
    }
  }
  
  @keyframes fade-bottom {
    from {
      opacity: 1;
      transform: scaleY(1);
    }
    to {
      opacity: 0;
      transform: scaleY(0);
    }
  }
}

/* Enhanced indicator with shadow effect */
.scroll-indicator--enhanced {
  height: 2.5rem;
}

.scroll-indicator--enhanced::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(to var(--gradient-direction), 
               hsl(var(--background)/80%) 0%, 
               hsl(var(--background)/40%) 50%, 
               transparent 100%);
}

/* Fallback visibility control (for browsers without scroll-timeline) */
.scroll-indicator.hidden-indicator {
  opacity: 0;
  transform: scaleY(0);
}

.scroll-indicator.visible-indicator {
  opacity: 1;
  transform: scaleY(1);
}