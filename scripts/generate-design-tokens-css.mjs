import fs from "node:fs";
import path from "node:path";
import { fileURLToPath } from "node:url";
import { designTokens } from "../lib/design-tokens.ts";
import { createRootCssBlock, tokensToCssVariables } from "../lib/token-helpers.ts";

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
const outputPath = path.join(__dirname, "..", "app", "generated-design-tokens.css");

const variables = tokensToCssVariables(designTokens);
const css = [
  "/* Auto-generated by scripts/generate-design-tokens-css.mjs */",
  "/* Do not edit directly */",
  "",
  createRootCssBlock(variables),
  "",
].join("\n");

fs.writeFileSync(outputPath, css, "utf8");
console.log(`âœ“ Generated design token CSS at ${outputPath}`);
